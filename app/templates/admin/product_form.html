{% extends "admin/admin_base.html" %}

{% block admin_content %}
<h1 class="mb-4">{% if product %}Edit{% else %}Add New{% endif %} Product</h1>
<form method="POST" enctype="multipart/form-data">
    <div class="mb-3">
        <label for="name" class="form-label">Name</label>
        <input type="text" class="form-control" id="name" name="name" value="{{ product.name if product else '' }}" required>
    </div>
    <div class="mb-3">
        <label for="brand" class="form-label">Brand</label>
        <input type="text" class="form-control" id="brand" name="brand" value="{{ product.brand if product else '' }}" required>
    </div>
    <div class="mb-3">
        <label for="type" class="form-label">Type</label>
        <select class="form-select" id="type" name="type" required>
            {% for category in categories %}
            <option value="{{ category.name }}" {% if product and product.type == category.name %}selected{% endif %}>{{ category.name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="flavor" class="form-label">Flavor</label>
        <input type="text" class="form-control" id="flavor" name="flavor" value="{{ product.flavor if product else '' }}">
    </div>
    <div class="mb-3">
        <label for="ingredients" class="form-label">Ingredients</label>
        <textarea class="form-control" id="ingredients" name="ingredients" rows="3">{{ product.ingredients if product else '' }}</textarea>
    </div>
    <div class="mb-3">
        <label for="protein_per_serving" class="form-label">Protein per Serving (g)</label>
        <input type="number" step="0.1" class="form-control" id="protein_per_serving" name="protein_per_serving" value="{{ product.protein_per_serving if product else '' }}" required>
    </div>
    <div class="mb-3">
        <label for="calories" class="form-label">Calories</label>
        <input type="number" class="form-control" id="calories" name="calories" value="{{ product.calories if product else '' }}">
    </div>
    <div class="mb-3">
        <label for="sugar" class="form-label">Sugar (g)</label>
        <input type="number" step="0.1" class="form-control" id="sugar" name="sugar" value="{{ product.sugar if product else '' }}">
    </div>
    <div class="mb-3">
        <label for="carbohydrates" class="form-label">Carbohydrates (g)</label>
        <input type="number" step="0.1" class="form-control" id="carbohydrates" name="carbohydrates" value="{{ product.carbohydrates if product else '' }}">
    </div>
    <div class="mb-3">
        <label for="fats" class="form-label">Fats (g)</label>
        <input type="number" step="0.1" class="form-control" id="fats" name="fats" value="{{ product.fats if product else '' }}">
    </div>
    <div class="mb-3">
        <label for="saturated_fats" class="form-label">Saturated Fats (g)</label>
        <input type="number" step="0.1" class="form-control" id="saturated_fats" name="saturated_fats" value="{{ product.saturated_fats if product else '' }}">
    </div>
    <div class="mb-3">
        <label for="cholesterol" class="form-label">Cholesterol (mg)</label>
        <input type="number" step="0.1" class="form-control" id="cholesterol" name="cholesterol" value="{{ product.cholesterol if product else '' }}">
    </div>
    <div class="mb-3">
        <label for="sodium" class="form-label">Sodium (mg)</label>
        <input type="number" step="0.1" class="form-control" id="sodium" name="sodium" value="{{ product.sodium if product else '' }}">
    </div>
    <div class="mb-3">
        <label for="dietary_fiber" class="form-label">Dietary Fiber (g)</label>
        <input type="number" step="0.1" class="form-control" id="dietary_fiber" name="dietary_fiber" value="{{ product.dietary_fiber if product else '' }}">
    </div>
    <div class="mb-3">
        <label for="price" class="form-label">Price ($)</label>
        <input type="number" step="0.01" class="form-control" id="price" name="price" value="{{ product.price if product else '' }}" required>
    </div>
    <div class="mb-3">
        <label for="serving_size" class="form-label">Serving Size</label>
        <input type="text" class="form-control" id="serving_size" name="serving_size" value="{{ product.serving_size if product else '' }}">
    </div>
    <div class="mb-3">
        <label for="servings_per_container" class="form-label">Servings per Container</label>
        <input type="number" class="form-control" id="servings_per_container" name="servings_per_container" value="{{ product.servings_per_container if product else '' }}">
    </div>
    <div class="mb-3">
        <label for="flavors" class="form-label">Available Flavors</label>
        <textarea class="form-control" id="flavors" name="flavors" rows="2">{{ product.flavors if product else '' }}</textarea>
    </div>
    <div class="mb-3">
        <label for="allergens" class="form-label">Allergens</label>
        <textarea class="form-control" id="allergens" name="allergens" rows="2">{{ product.allergens if product else '' }}</textarea>
    </div>
    <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <textarea class="form-control" id="description" name="description" rows="3">{{ product.description if product else '' }}</textarea>
    </div>
    <div class="mb-3">
        <label for="source" class="form-label">Source</label>
        <input type="text" class="form-control" id="source" name="source" value="{{ product.source if product else '' }}">
    </div>
    <div class="mb-3">
        <label for="image" class="form-label">Product Image</label>
        <input type="file" class="form-control" id="image" name="image" accept="image/*">
        {% if product and product.image_url %}
            <img src="{{ product.image_url }}" alt="{{ product.name }}" class="mt-2" style="max-width: 200px;">
        {% endif %}
    </div>
    <button type="submit" class="btn btn-primary">{% if product %}Update{% else %}Create{% endif %} Product</button>
</form>
{% endblock %}